<!-- https://www.viralpatel.net/dynamically-add-remove-rows-in-html-table-using-javascript/-->

<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="stylesheet" href="../css/main.css" type="text/css">
	<link rel="stylesheet" href="{{ url_for('static',filename='styles/main.css') }}" type="text/css">
	<link href="https://fonts.googleapis.com/css2?family=Newsreader:wght@200&display=swap" rel="stylesheet">
	<title> Add/Remove Questions on Form</title>
	<script src="https://cdn.lordicon.com/libs/frhvbuzj/lord-icon-2.0.2.js"></script>
	<script src="{{ url_for('static', filename='js/createTemplate.js') }}"></script>
</head>

<body>
	<div class="box header">
		<h2>Feedback System</h2>
	</div>
	<br>

	<div class="screenbox" style="height: 500px">
		<form class="form" method="post">
			<h3>
				<lord-icon
					src="https://cdn.lordicon.com/nocovwne.json"
					trigger="loop"
					colors="primary:#121331,secondary:#16ccec"
					style="width:60px;height:60px">
				</lord-icon>
				<br>
				ADD/REMOVE QUESTIONS <br> ON FEEDBACK FORM</h3>

			<div class="question">
				<input type="text" name="templateName" required/>
				<label>Enter Template Name</label>
			</div>

			<input type="button" class="button" value="ADD QUESTION" style="font-size: 11.5px; padding: 12px 10px !important;" onclick="addRow('dataTable')" />
			<input type="button" class="button" value="DELETE QUESTION" style="font-size: 11.5px; padding: 12px 10px;" onclick="deleteRow('dataTable')" />
			<br><br>

			<table id="dataTable">
				<tr>
					<td>
						<div style="display:grid; grid-template-columns:30px 1fr;">
							<input type="checkbox" name="chk" style="top:45%;left:45%;position:relative;transform: translate(-50%,-50%);"/>
							<div class="question">
								<input type="text" name="txt" required/>
								<label>Question text</label>
							</div>
						</div>
					</td>
					<td>
						<div class="custom-select" style="width:250px;">
							<select name="questionType">
								<option value="blank"> -- Select an Option -- </option>
								<option value="Star Rating">Star Rating</option>
								<option value="Text">Text</option>
							</select>
						  </div>
					<td>
				</tr>
			</table>

			<br>
			<input type="submit" value="CREATE FORUM" style="margin-top:70px;" class="button" />
		</form>
	</div>
</body>


<script>
	var x, i, j, l, ll, selElmnt, a, b, c;
	
	x = document.getElementsByClassName("custom-select");
	l = x.length;
	for (i = 0; i < l; i++) {
	  selElmnt = x[i].getElementsByTagName("select")[0];
	  ll = selElmnt.length;
	 
	  a = document.createElement("DIV");
	  a.setAttribute("class", "select-selected");
	  a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
	  x[i].appendChild(a);
	  
	  b = document.createElement("DIV");
	  b.setAttribute("class", "select-items select-hide");
	  for (j = 1; j < ll; j++) {
	  
		c = document.createElement("DIV");
		c.innerHTML = selElmnt.options[j].innerHTML;
		c.addEventListener("click", function(e) {
		
			var y, i, k, s, h, sl, yl;
			s = this.parentNode.parentNode.getElementsByTagName("select")[0];
			sl = s.length;
			h = this.parentNode.previousSibling;
			for (i = 0; i < sl; i++) {
			  if (s.options[i].innerHTML == this.innerHTML) {
				s.selectedIndex = i;
				h.innerHTML = this.innerHTML;
				y = this.parentNode.getElementsByClassName("same-as-selected");
				yl = y.length;
				for (k = 0; k < yl; k++) {
				  y[k].removeAttribute("class");
				}
				this.setAttribute("class", "same-as-selected");
				break;
			  }
			}
			h.click();
		});
		b.appendChild(c);
	  }
	  x[i].appendChild(b);
	  a.addEventListener("click", function(e) {
	  
		  e.stopPropagation();
		  closeAllSelect(this);
		  this.nextSibling.classList.toggle("select-hide");
		  this.classList.toggle("select-arrow-active");
		});
	}
	function closeAllSelect(elmnt) {
	
	  var x, y, i, xl, yl, arrNo = [];
	  x = document.getElementsByClassName("select-items");
	  y = document.getElementsByClassName("select-selected");
	  xl = x.length;
	  yl = y.length;
	  for (i = 0; i < yl; i++) {
		if (elmnt == y[i]) {
		  arrNo.push(i)
		} else {
		  y[i].classList.remove("select-arrow-active");
		}
	  }
	  for (i = 0; i < xl; i++) {
		if (arrNo.indexOf(i)) {
		  x[i].classList.add("select-hide");
		}
	  }
	}
	
	document.addEventListener("click", closeAllSelect);
	</script>


</html>